/*! media-credit  filename.min.js 2016-04-12 10:10:00 PM */
!function(a,b,c){function d(a){var b=new e({model:a.model});a.on("post-render",function(){a.views.insert(a.$el.find(".advanced-image"),b.render().el)})}var e,f;b.media.events&&(b.media.events.on("editor:image-edit",function(a){""===a.metadata.mediaCreditName&&""!==a.metadata.mediaCreditID&&(a.metadata.mediaCreditName=$mediaCredit.id[a.metadata.mediaCreditID])}),b.media.events.on("editor:frame-create",function(a){f=a.frame,f.on("content:render:image-details",d)}),b.media.events.on("editor:image-update",function(a){var b,c,d,e=a.editor,g=e.dom,h=a.image,i=f.content.get().model,j=i.get("align"),k=i.get("width"),l=i.get("mediaCreditName"),m=i.get("mediaCreditID"),n=i.get("mediaCreditLink");c=h.parentNode&&"A"===h.parentNode.nodeName?g.getNext(h.parentNode,".mceMediaCreditTemp"):g.getNext(h,".mceMediaCreditTemp"),$mediaCredit.id[m]!==l&&(m=""),b=m?$mediaCredit.id[m]+$mediaCredit.separator+$mediaCredit.organization:l,b=b.replace(/<[^>]+>(.*)<\/[^>]+>/g,"$1"),j="align"+(j||"none"),null===c&&(l||m)&&(c=g.create("span",{"class":"mceMediaCreditTemp mceNonEditable","data-media-credit-id":m,"data-media-credit-name":l,"data-media-credit-align":j,"data-media-credit-link":n},b),h.parentNode&&"A"===h.parentNode.nodeName?g.insertAfter(c,h.parentNode):g.insertAfter(c,h)),c&&(g.getParent(c,"dl.wp-caption")||(d=g.create("div",{"class":"mceMediaCreditOuterTemp "+j,style:"width: "+(parseInt(k)+10)+"px"}),g.insertAfter(d,c.parentNode),g.add(d,c.parentNode),g.remove(c.parentNode,!0)),g.setAttrib(c,"data-media-credit-name",l),g.setAttrib(c,"data-media-credit-id",m),g.setAttrib(c,"data-media-credit-link",n),g.setHTML(c,b))}),e=b.Backbone.View.extend({className:"media-credit-image-properties",template:b.media.template("media-credit-image-properties"),initialize:function(){b.Backbone.View.prototype.initialize.apply(this,arguments)},prepare:function(){var a=this.model.toJSON();return a},render:function(){return b.Backbone.View.prototype.render.apply(this,arguments),this}}))}(jQuery,wp,_);